---
import DefaultLayout from '../layouts/default.astro';
import Today from '../components/Today.vue';
import UpcomingEvents from '../components/UpcomingEvents.vue';
import FilterBar from '../components/FilterBar.vue';
import Filters from '../components/Filters.vue';

// Fetch events during SSR
const response = await fetch('https://deploy-preview-85--eventua11y.netlify.app/get-events');
const { future: events } = await response.json();

---
<DefaultLayout>
  <Today :events="events" />
  <FilterBar client:load v-if="filtersStore.totalEventCount > 0" />
  <Filters client:load />
  <div class="container readable">
    <UpcomingEvents :events="events" client:load />
  </div>
  <!-- End container -->
</DefaultLayout>