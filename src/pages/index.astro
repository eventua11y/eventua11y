---
import DefaultLayout from '../layouts/default.astro';
import Today from '../components/Today.vue';
import UpcomingEvents from '../components/UpcomingEvents.vue';
import FilterBar from '../components/FilterBar.vue';
import Filters from '../components/Filters.vue';

// Disable prerendering to enable SSR
export const prerender = false;

// Fetch events during SSR
console.log('Fetching events during SSR...');
const response = await fetch('https://deploy-preview-85--eventua11y.netlify.app/api/get-events');
const { future: events } = await response.json();
console.log('Events fetched during SSR:', events.length);
---

<DefaultLayout>
  <Today client:load />
  <FilterBar client:only="vue" />
  <Filters client:load />
  <div class="container readable py-l">
    <UpcomingEvents client:load />
  </div>
  <!-- End container -->
</DefaultLayout>