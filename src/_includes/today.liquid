<section id="today">

  <div class="container readable stack">

    <hgroup role="group" aria-roledescription="Heading group">
      <h2>Today</h2>
      <p aria-roledescription="subtitle">
        {% edge "liquid" %}
          <time datetime="{% todayISO %}">{% today %}</time>
        {% endedge %}
      </p>
    </hgroup>

    {% edge "liquid" events %}

      {% assign todaysThemes = events | todaysThemes | sort: "dateStart" %}
      {% assign todaysEvents = events | todaysEvents | sort: "dateStart" %}

      <!-- if there are no events today -->
      {% if todaysThemes.length == 0 and todaysEvents.length == 0 %}
        <p>There are no events today.</p>
      {% endif %}

      {% if todaysThemes.length > 0 %}
        <div class="events events--list stack">
          {% for event in todaysThemes %}
            <article
              class="event event--theme"
              itemprop="event"
              itemscope
              itemtype="https://schema.org/Event">
              <h3 class="event__title" itemprop="name">
                {% if event.website %}
                  <a itemprop="url" href="{{ event.website }}">{{ event.title }}</a>
                {% else %}
                  {{ event.title }}{% endif %}
              </h3>
              <div class="event__dates text-muted">
                <span class="event__dateStart">
                  <span class="sr-only">Starts</span>
                  {% if event.day %}
                    <time datetime="{{ event.dateStart | isoDate }}" itemprop="startDate">{{ event.dateStart | localizeDate: "LL" }}</time>
                  {% else %}
                    <time datetime="{{ event.dateStart | isoDate }}" itemprop="startDate">{{ event.dateStart | localizeDate: "LLL" }}</time>
                  {% endif %}
                </span>
                {% if event.dateEnd %}
                  <span class="event__dateEnd">
                    <span class="sr-only">Ends</span>
                    <i class="fa-solid fa-arrow-right-long"></i>
                    {% if event.day %}
                      <time datetime="{{event.dateEnd | isoDate}}" itemprop="endDate">{{ event.dateEnd | localizeDate: "LL" }}</time>
                    {% else %}
                      <time datetime="{{event.dateEnd | isoDate}}" itemprop="endDate">{{ event.dateEnd | localizeDate: "LLL" }}</time>
                    {% endif %}
                  </span>
                {% endif %}
              </div>
              <!-- End dates -->
              <div class="event__delivery">
                <span class="sr-only">Location:</span>
                <span class="event__location">
                  <i class="fa-solid fa-fw fa-location-dot"></i>
                  <span itemprop="location" itemscope itemtype="https://schema.org/Place">{{ event.location | default: 'International' }}</span>
                </span>
              </div>
            </article>
            <!-- End event -->
          {% endfor %}
          <!-- End themes -->
        </div>
        <!-- End .events -->
      {% endif %}

      {% if todaysEvents.length > 0 %}
        <div class="events events--list stack">
          {% for event in todaysEvents %}
            <article
              class="event event--{{ event.type }}"
              itemprop="event"
              itemscope
              itemtype="https://schema.org/Event">
              <h3 class="event__title" itemprop="name">
                {% if event.website %}
                  <a itemprop="url" href="{{ event.website }}">{{ event.title }}</a>
                {% else %}
                  {{ event.title }}{% endif %}
              </h3>
              <div class="event__dates text-muted">
                <span class="event__dateStart">
                  <span class="sr-only">Starts</span>
                  {% if event.day %}
                    <time datetime="{{ event.dateStart | isoDate }}" itemprop="startDate">{{ event.dateStart | localizeDate: "LL" }}</time>
                  {% else %}
                    <time datetime="{{ event.dateStart | isoDate }}" itemprop="startDate">{{ event.dateStart | localizeDate: "LLL z" }}</time>
                  {% endif %}
                </span>
                {% if event.dateEnd %}
                  <span class="event__dateEnd">
                    <span class="sr-only">Ends</span>
                    <i class="fa-solid fa-arrow-right-long"></i>
                    {% if event.day %}
                      <time datetime="{{event.dateEnd | isoDate}}" itemprop="endDate">{{ event.dateEnd | localizeDate: "LL" }}</time>
                    {% else %}
                      <time datetime="{{event.dateEnd | isoDate}}" itemprop="endDate">{{ event.dateEnd | localizeDate: "LLL z" }}</time>
                    {% endif %}
                  </span>
                {% endif %}
              </div>
              <!-- End dates -->
              <div class="event__delivery">
                <span class="sr-only">Location:</span>
                {% if event.attendanceMode == "online" %}
                  <span class="event__online" itemprop="eventAttendanceMode" content="https://schema.org/OnlineEventAttendanceMode">
                  <i class="fa-solid fa-laptop"></i>
                    Online</span>
                {% endif %}
                {% if event.attendanceMode == "offline" %}
                  <span class="event__location" itemprop="eventAttendanceMode" content="https://schema.org/OfflineEventAttendanceMode">
                  <i class="fa-solid fa-fw fa-location-dot"></i>
                    <span itemprop="location" itemscope itemtype="https://schema.org/Place">{{ event.location || "International" }}</span>
                  </span>
                {% endif %}
                {% if event.attendanceMode == "mixed" %}
                  <div itemprop="eventAttendanceMode" content="https://schema.org/MixedEventAttendanceMode">
                    <span class="event__online">
                      <i class="fa-solid fa-laptop"></i>
                      Online</span> and 
                    <span class="event__location">
                      <i class="fa-solid fa-fw fa-location-dot"></i>
                      <span itemprop="location" itemscope itemtype="https://schema.org/Place">{{ event.location || "International" }}</span>
                    </span>
                  </div>
                {% endif %}
              </div>
              {% if event.description %}
              <details class="event__description-container">
                <summary class="btn btn--small event__description-toggle"><i class="icon fa-solid fa-caret-right"></i> Description</summary>
                <p itemprop="description" class="event__description">
                    {{ event.description }}
                </p>
              </details>
            {% endif %}
              {% if event.cpacc or event.was or event.cpwa %}
                <span class="event__iaap">
                  <img
                    class="event__iaaplogo"
                    src="/images/iaap.png"
                    alt="IAAP" />
                  <span>Credits pre-approved for
                    {% if event.cpacc %}
                      <abbr title="Certified Professional in Accessibility Core Competencies">CPACC</abbr>
                    {% endif %}
                    {% if event.was %}
                      <abbr title="Web Accessibility Specialist">WAS</abbr>
                    {% endif %}
                    {% if event.cpwa %}
                      <abbr title="Certified Professional in Web Accessibility">CPWA</abbr>
                    {% endif %}
                  </span>
                </span>
              {% endif %}
            </article>
            <!-- End .event -->
          {% endfor %}
          <!-- End events -->
        </div>
        <!-- End events -->
      {% endif %}
    {% endedge %}

  </div>
  <!-- End .container -->

</section>
<!-- End #today -->